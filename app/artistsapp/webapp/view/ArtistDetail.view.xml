<mvc:View
  controllerName="my.apmorrowland.artistsapp.controller.ArtistDetail"
  displayBlock="true"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m">

  <Page
    title="Artist detail"
    showNavButton="true"
    navButtonPress=".onNavBack">

    <content>
      <VBox class="sapUiMediumMargin">

        <!-- Header + extra visuals -->
        <HBox justifyContent="SpaceBetween" wrap="Wrap">
          <HBox alignItems="Center">
            <Avatar
              displaySize="M"
              initials="{vm>/initials}"
              class="sapUiSmallMarginEnd"/>
            <VBox>
              <Title text="{name}" level="H2"/>
              <Text text="{= ${genre} + ' • ' + ${country} }"/>
            </VBox>
          </HBox>

          <VBox>
            <ObjectStatus
              text="{vm>/labelText}"
              state="{vm>/labelState}"
              class="sapUiTinyMarginBottom"/>
            <ObjectAttribute title="Trending score" text="{vm>/trendingText}"/>
          </VBox>
        </HBox>

        <Toolbar class="sapUiSmallMarginTop">
          <Title text="Biografie &amp; achtergrond" level="H3"/>
          <ToolbarSpacer/>
          <Link text="Spotify" href="{vm>/spotifyUrl}" target="_blank"/>
          <ToolbarSeparator/>
          <Link text="Instagram" href="{vm>/instagramUrl}" target="_blank"/>
        </Toolbar>

        <Text
          class="sapUiSmallMarginTop"
          text="{= ${bio} ? ${bio} : 'Geen biografie toegevoegd. Voeg optioneel een bio toe bij “Nieuwe artiest” zodat het festivalteam extra context heeft.' }"
          wrapping="true" />

        <Toolbar class="sapUiMediumMarginTop">
          <Title text="Optredens (planning)" level="H3"/>
          <ToolbarSpacer/>
          <Button text="Refresh" icon="sap-icon://refresh" type="Transparent" press=".onRefreshAll"/>
        </Toolbar>

        <List
          id="perfList"
          items="{ path: 'performances' }"
          noDataText="Nog geen optredens gepland.">
          <items>
            <ObjectListItem
              title="{= ${festivalDay/label} + ' — ' + ${stage/name} }"
              intro="{= ${startTime} + ' - ' + ${endTime} }"/>
          </items>
        </List>

        <Toolbar class="sapUiMediumMarginTop">
          <Title text="Reviews" level="H3"/>
          <ToolbarSpacer/>
          <ObjectAttribute title="Avg rating" text="{vm>/avgRatingText}"/>
          <ToolbarSeparator/>
          <Button text="Review toevoegen" icon="sap-icon://add" press=".onOpenAddReview"/>
        </Toolbar>

        <List
          id="reviewsList"
          items="{ path: 'reviews' }"
          noDataText="Nog geen reviews. Voeg de eerste review toe.">
          <items>
            <ObjectListItem
              title="{reviewerName}"
              intro="{= 'Rating: ' + ${rating} + '/5' }">
              <attributes>
                <ObjectAttribute title="Date" text="{reviewDate}"/>
                <ObjectAttribute title="Comment" text="{comment}"/>
              </attributes>
            </ObjectListItem>
          </items>
        </List>

      </VBox>
    </content>
  </Page>

</mvc:View>
