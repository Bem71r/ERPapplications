<mvc:View
  controllerName="my.apmorrowland.artistsapp.controller.ArtistDetail"
  displayBlock="true"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m">

  <Page
    title="Artist detail"
    showNavButton="true"
    navButtonPress=".onNavBack">

    <content>
      <VBox class="sapUiMediumMargin">

        <ObjectHeader
          title="{name}"
          intro="{genre}">
          <attributes>
            <ObjectAttribute title="Country" text="{country}"/>
            <ObjectAttribute title="Popularity" text="{popularity}"/>
            <ObjectAttribute title="Avg rating" text="{= ${vm>/avgRatingText} }"/>
          </attributes>
        </ObjectHeader>

        <!-- NIEUW/DUidelijk: biografie + fallback -->
        <Toolbar class="sapUiMediumMarginTop">
          <Title text="Biografie &amp; achtergrond" level="H3"/>
        </Toolbar>

        <Text
          class="sapUiSmallMarginTop"
          text="{= ${bio} ? ${bio} : 'Geen biografie toegevoegd. Voeg bij “Nieuwe artiest” een bio toe zodat het festivalteam voldoende context heeft.' }"
          wrapping="true" />

        <Toolbar class="sapUiMediumMarginTop">
          <Title text="Optredens (planning)" level="H3"/>
          <ToolbarSpacer/>
          <Button text="Refresh" icon="sap-icon://refresh" type="Transparent" press=".onRefreshAll"/>
        </Toolbar>

        <List
          id="perfList"
          items="{ path: 'performances' }"
          noDataText="Nog geen optredens gepland.">
          <items>
            <ObjectListItem
              title="{= ${festivalDay/label} + ' — ' + ${stage/name} }"
              intro="{= ${startTime} + ' - ' + ${endTime} }"/>
          </items>
        </List>

        <Toolbar class="sapUiMediumMarginTop">
          <Title text="Reviews" level="H3"/>
          <ToolbarSpacer/>
          <Button text="Review toevoegen" icon="sap-icon://add" press=".onOpenAddReview"/>
        </Toolbar>

        <List
          id="reviewsList"
          items="{ path: 'reviews' }"
          noDataText="Nog geen reviews. Voeg de eerste review toe.">
          <items>
            <ObjectListItem
              title="{reviewerName}"
              intro="{= 'Rating: ' + ${rating} + '/5' }">
              <attributes>
                <ObjectAttribute title="Date" text="{reviewDate}"/>
                <ObjectAttribute title="Comment" text="{comment}"/>
              </attributes>
            </ObjectListItem>
          </items>
        </List>

      </VBox>
    </content>
  </Page>

</mvc:View>
